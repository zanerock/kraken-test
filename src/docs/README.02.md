## Developer notes

- In order to make things "real-ish", you con supply an API key as a CLI option (or pass it in if using the library), but it will also look for the a 'api-key.txt' file in the current working dir and read the API from there, as would be standard practice. (If this were real, I'd actually default the file location to `~/.config/site-outage-reporter` or something.)
- Besides the key reading function, the other two interesting functions are the `mergeOutageData`, which combines the outage and site data for the site outage report, and `smartFetch` which surrounds the standard `fetch` with retry logic to handle 500 and other errors.
- Speaking of the smart retry, I tried to identify the situations where a retry could help (e.g., 500, which are intermittent, or certain 4xx codes where a retry might help) vs those where the request itself is flawed and a retry won't help (e.g., 400, 403, etc.).
- Since it's a CLI tool and as a user tools that just silently do stuff are spooky, I made it chatty so it tells you what it's doing as it goes along. If this were a real project, I would have used some kind of logger for the output and included a `--quiet` option.
- I use a set of SDLC tools that I developed to setup standard infrastructure. I went ahead and use this for this project because, why not? Among other things:
  - This sets up the build (make files) and installs standard configurations I use for Babel+Rollup, Jest, and ESLint.
  - The tool also ensures that everything passes QA before work can be submitted.
  - It builds ESM and CJS versions of the library files, taking into account the `package.json` `engines` designation.
  - When submitted, the tool generates a configurable attestation in the pull request and also links to all the QA artifacts. You can see this in the [pull request](https://github.com/zanerock/kraken-test/issues/3).
  - Can automatically generate 'coverage' and CI/CD badges.
  - Automatically generates a simple CI/CD unit test to run on multiple platforms and node versions.
- The [API reference](#api-reference) section is built using jsdoc-to-markdown and a custom DMD (output formatter) that I wrote to optimize for this use case ([dmd-readme-api](https://www.npmjs.com/package/dmd-readme-api)). Among other things, it has the cool feature of linking the documentation for a function to the source code where the function is defined.
- I also went ahead and enabled the CLI tool to take in options for different cutoff times and site IDs. It defaults to the values in the work spec, but is to demonstrate the how I'd develop things, I wanted to make a "real-ish" CLI and also include standard CLI docs, generated from the options spec. The CLI docs are generated by another tool I wrote: [command-line-documentation](https://www.npmjs.com/package/command-line-documentation).
- Speaking of options, I also used a library I just recently wrote, [string-input](https://www.npmjs.com/package/string-input) which, among other things, includes a robust `DateTime` processor which cane take in many different date time formats and integrates with command-line-args. I figure since I had it handy, why not.
- As mentioned before, I normally wouldin't include the `./dist` dir in the git repo, but since the build relies on `make` and I don't assume that's available on every system, I included `./dist` for convenience.
- For testing, I focused on they two key, and most complicated bits, the merge logic (which is central, and so important to check), and the 'smart fetch' function. I also did some testing around the options processing and ingesting different date formats, as well as the API key file reading logic. I didn't test the 'kraken server', since all the functions are just simple wrappers with no real logic that just feed constants to the smart fetch routine, nor did I test the main routine as it just does straightforward, linear calls of tho other functions and doesn't have any non-trivial logic. Where this a real project, I probably would have done a couple simple tests and it's always nice to get 100% code coverage.